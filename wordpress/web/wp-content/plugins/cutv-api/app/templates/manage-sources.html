<main>

    <div class="ui menu channel" class="{{formClass}}">
        <div class="item">
            <div class="ui icon input">
                <input type="text" ng-model="query" placeholder="Filter unassigned sources">
                <!--<input type="text" placeholder="Search...">-->
                <i class="search icon"></i>
            </div>
        </div>
        <button class="ui positive button" ng-click="updateChannelSources()" ng-if="!!sources.selected">Save</button>
    </div>

    <div class="ui content">
        <div class="relative-wrapper">
            <div class="ui success mini message" ng-if="updateSuccess">
                <div class="header">
                    Channel sources updated!
                </div>
            </div>
            <form novalidate class="simple-form">
                <!-- <div class="active loader inline ui" ng-if="!sources.selected.length"></div> -->
                <div class="ui grid">

                    <div class="ui teal message sixteen wide column" ng-if="!sources.selected.length">
                        <div class="header">
                            No sources attached to this channel yet!
                        </div>
                        <p>Select sources to attach to this channel by selecting them below. If you need to merge sources into this channel, add them, hit the video stab and delete the source from there!
                        </p>
                    </div>

                    <div class="six wide column" ng-if="sources.selected.length">
                        <h4 class="ui header">Sources assigned to {{channel.playlist_name}}</h4>
                        <div class="item assigned" ng-repeat="source in sources.selected | orderObjectBy:'name' | filter: query ">
                            <div class="ui ">
                                <input type="checkbox" id="{{source.source_id}}" ng-model="source.selected" ng-change="selectSource(source)">
                                <label for="{{source.source_id}}">{{source.name}}</label>
                            </div>
                        </div>

                    </div>
                    <div class="ten wide column">
                        <h4 class="ui header">Available sources</h4>
                        <div class="ui list columns">

                            <div class="item unassigned" ng-repeat="source in sources.available track by $index">
                                <div class="ui ">
                                    <input type="checkbox" id="{{source.source_id}}" ng-model="source.selected" ng-change="selectSource(source)">
                                    <label for="{{source.source_id}}">{{source.name}}</label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
        </div>
    </div>
    </form>
</main>